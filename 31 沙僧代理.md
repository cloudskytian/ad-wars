## 沙僧代理
通过代理的方式，可以拦截 url, 在 Android 手机上就是开启 VPN 服务。

### 安装证书
目前几乎所有的应用都是使用 HTTPS 来传输数据，来保证安全性，所以默认情况下无法拦截 url。  

不过可以使用中间人攻击(Man-in-the-middle attack：MITM)方式，来拦截请求。  

而更严格的是，从 Android 7.0 之后，用户安装的 HTTPS CA 证书不被信任，所以需要把证书安装在系统证书。  

大多数手机都是 Android 7.0 以上，为了更好的使用，需要安装系统证书。

#### Magisk 模块: [Move Certificates](https://github.com/Magisk-Modules-Repo/movecert)
安装之后，重启会将用户安装的证书移动为系统证书。

将「大圣净化」转为系统应用
#### Magisk 模块[App Systemizer (Terminal Emulator)](https://github.com/Magisk-Modules-Repo/terminal_systemizer)
``` shell
adb shell
su
systemize
==============================================

 1 - Systemize Installed Apps (Listed)
 2 - Systemize Installed Apps (Enter label) 
 3 - Systemize given APK
 4 - Revert Systemized Apps
 s - Set SELinux
 d - Donate
 0 - Exit
 
 # 选择 1 已经安装的应用列表
 Installed Apps ===============================
  31 - 大圣净化
  ...
 # 然后选「大圣净化」-> 31
 
 # 移动完成后重启即可
 
 # 也可以通过 4 Revert Systemized Apps 撤回系统应用
```

### 系统证书目录
/system/etc/security/cacerts

### 添加应用
只会拦截添加的应用
### 添加规则
1. 完整 url 拦截(一般不用)
2. Url 中关键字拦截，通配符使用(.*)
3. host 域名拦截(一般不用), 可以使用 hosts 替换

### 悬浮窗会显示所有的 url
1. 红色的表示已经拦截
2. 黄色是包含 ad/ads 关键字

### 出现没有网络
如果网络是正常的，那么就是证书问题。有写 App 会验证证书，不信任的就拒绝链接。

### 不支持的应用
1. 抖音